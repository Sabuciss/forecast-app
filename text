<?php
         
         $data = file_get_contents("https://emo.lv/weather-api/forecast/?city=cesis,latvia");
         $weatherData = json_decode($data, true);

         $today = $weatherData['list'][0];

         
    ?>

<!DOCTYPE html>
<html lang="lv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forecast app</title>
    <link rel="stylesheet" href="style.css">
</head>
<body onload="startTime()">

  <nav class="navbar">
    <div class="logo">VTDT Sky</div>
    <form class="search" method="GET" action="">
      <input type="text" name="city" placeholder="Ievadi pilsētu" value="<?php echo htmlspecialchars($_GET['city'] ?? 'Cesis,latvia'); ?>" />
      <button type="submit">Meklēt</button>
    </form>
  </nav>
  <div class="main-container">
    <div class="left">
      <div class="card">
        <div class="card-title">Current Weather</div>
        <div id="txt"></div>
        <div class="card-value"><?php echo round($weatherData['list'][0]['temp']['day'], 1); ?>°C</div>
        <div><?php echo ucfirst($weatherData['list'][0]['weather'][0]['description']); ?></div>
      </div>
      <div class="card">
        <div class="card-title">Population</div>
        <div class="card-value"><?php echo $weatherData['city']['population']; ?></div>
      </div>
      <div class="card">
        <div class="card-title">Wind</div>
        <div class="card-value"><?php echo round($weatherData['list'][0]['speed'],2); ?> km/h</div>
      </div>
      <div class="card">
        <div class="card-title">Humidity</div>
        <div class="card-value"><?php echo $weatherData['list'][0]['humidity']; ?>%</div>
      </div>
      <div class="card">
        <div class="card-title">Pressure (hPa)</div>
        <div class="card-value"><?php echo $weatherData['list'][0]['pressure']; ?>°</div>
      </div>
      <div class="card">
        <div class="card-title">Pressure (in)</div>
        <div class="card-value">
          <?php
            $pressure_hpa = $weatherData['list'][0]['pressure'];
            $pressure_in = round($pressure_hpa * 0.02953, 2);
            echo $pressure_in . " in";
          ?>
        </div>
          <div class="sun-moon">
            <p>Sun & Moon Summary</p>
            <p>Sunrise <?php echo date('g:i A', $weatherData['list'][0]['sunrise']); ?></p>
            <p>Sunset <?php echo date('g:i A', $weatherData['list'][0]['sunset']); ?></p>
        </div>
      </div>
    </div>
    <div class="right">
      <div class="forecast-header">
        <span>Today</span>
        <span>Tomorrow</span>
        <span class="active">10 Days</span>
      </div>
      
    </div>
  </div>



     <p type="datetime-local"></p>

     <script>
            function startTime() {
            var today = new Date();
            var h = today.getHours();
            var m = today.getMinutes();
            var s = today.getSeconds();
            m = checkTime(m);
            s = checkTime(s);
            document.getElementById('txt').innerHTML =
            h + ":" + m + ":" + s;
            var t = setTimeout(startTime, 500);
        }
        function checkTime(i) {
            if (i < 10) {i = "0" + i};  
            return i;
        }
    </script>
    
</body>
</html>
